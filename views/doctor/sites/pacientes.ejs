<%- include('../partials/parte_sup.ejs')%>
<div class="info-container flex-column bd-highlight mb-3 mx-auto mt-2 w-75 pt-5">
    <div class="main-title justify-content-lg-start w-75">
        <h1 class="text-light text-center ms-lg-5">Mis Pacientes</h1>
        <div class="main-logo d-none d-xl-block">
            <svg enable-background="new 0 0 24 24" height="100" viewBox="0 0 24 24" width="100" xmlns="http://www.w3.org/2000/svg"><path d="m21.91 14.835-4.91-2.835 4.91-2.835c.478-.276.642-.888.366-1.366l-1.5-2.598c-.276-.478-.887-.642-1.366-.366l-4.91 2.835v-5.67c0-.552-.448-1-1-1h-3c-.552 0-1 .448-1 1v5.67l-4.91-2.835c-.479-.276-1.09-.112-1.366.366l-1.5 2.598c-.276.478-.113 1.09.366 1.366l4.91 2.835-4.91 2.835c-.478.276-.642.888-.366 1.366l1.5 2.598c.276.478.888.642 1.366.366l4.91-2.835v5.67c0 .552.448 1 1 1h3c.552 0 1-.448 1-1v-5.67l4.91 2.835c.478.276 1.09.112 1.366-.366l1.5-2.598c.276-.478.113-1.09-.366-1.366z"/></svg>
        </div>
    </div>
    <div class="row w-100 mt-5">
        <div class="col-4">
            <div class="form-outline">
                <input type="search" id="dni" class="form-control rounded" placeholder="DNI"/>
                
              </div>  
        </div>
        
    </div>

         
   
    <div class="row w-100 mt-4">
        <div class="col-5 text-center">
            <span>Nombres y apellidos </span> 
        </div>
        <div class="col-3 text-center">
            <span>DNI</span>
        </div>
        <div class="col-4 text-center">
            <span>Telefono</span>
        </div>   
    </div>
     
        
        
    <div class="row w-100" style="min-height: 300px; ">
        <div class="information-container mt-sm-4 w-100 h-75 overflow-auto ">
            <ul class="list-group list-group-flush" id="LISTA">
            <div style="display: none;" id="datospaciente">

                <%=listapacientes%>
            </div>
            </ul>
        </div>
    </div>
</div>
<script>
    
    var listadepacientes=JSON.parse(document.getElementById("datospaciente").innerText);
    console.log(listadepacientes);
    var form = document.getElementById("dni");
    var lista = document.getElementsByClassName("paciente");
    var LISTA=document.getElementById("LISTA");
    LISTA.innerHTML="";
    for(x of listadepacientes){
        LISTA.innerHTML+=`
         <li class="paciente list-group-item h-20 cursor-pointer">
                <span class="col-1 text-center">
                    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="book-reader" class="svg-inline--fa fa-book-reader fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="20" height="20">
                    <path fill="currentColor" d="M352 96c0-53.02-42.98-96-96-96s-96 42.98-96 96 42.98 96 96 96 96-42.98 96-96zM233.59 241.1c-59.33-36.32-155.43-46.3-203.79-49.05C13.55 191.13 0 203.51 0 219.14v222.8c0 14.33 11.59 26.28 26.49 27.05 43.66 2.29 131.99 10.68 193.04 41.43 9.37 4.72 20.48-1.71 20.48-11.87V252.56c-.01-4.67-2.32-8.95-6.42-11.46zm248.61-49.05c-48.35 2.74-144.46 12.73-203.78 49.05-4.1 2.51-6.41 6.96-6.41 11.63v245.79c0 10.19 11.14 16.63 20.54 11.9 61.04-30.72 149.32-39.11 192.97-41.4 14.9-.78 26.49-12.73 26.49-27.06V219.14c-.01-15.63-13.56-28.01-29.81-27.09z"></path>
                </svg>
                </span> 
                <span class="col-4 ">${x.pac_apellidos} ${x.pac_nombres}</span> 
                <span class="DNI col-3 text-center">${x.pac_dni}</span>
                <span class=" col-4 text-center">${x.pac_celular}</span>
            </li>`
    }
    
    function filtrar(){
        
            let dni=form.value;
            
            for(let x of lista){
                if(x.children[2].innerHTML.indexOf(dni)!==-1){
                    x.style.display="";
                    
                }else{
                    x.style.display="none";

                };
            }        
    }
    form.addEventListener("keyup",filtrar);
</script>
<%- include('../partials/parte_inf.ejs')%>